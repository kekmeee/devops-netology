Домашняя работа по занятию "6.1. Типы и структура СУБД"
==

1. Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:
- Электронные чеки в json виде
- Склады и автомобильные дороги для логистической компании
- Генеалогические деревья
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
- Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

<h3>Ответ:</h3>

1. Электронные чеки в json виде -  NoSQL (документо-ориентированная). Простая структура (только документы), не требующая
   отдельного проектирования БД. Тип БД соответствует необходимому типу сущности (чек - документ). 
2. Склады и автомобильные дороги для логистической компании - NoSQL (графовая). Склады - узлы, дороги - ребра.
3. Генеалогические деревья - NoSQL (сетевая). Деревья имеют структуру, похожую на иерархическую, но в иерархическом
   типе бд у одного потомка может быть только один родитель. А сетевая БД это позволяет для одного потомка иметь двух
   родителей.
4. Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации - NoSQL (ключ-значение). Простая
   структура, быстродействие. Даже если БД упадет, то единственное, что произойдет, так это повторная аутенфикация 
   клиентов.
5. Отношения клиент-покупка для интернет-магазина - реляционная. Интернет-магазин имеет множество категорий и в каждой
   категории имеется множество товаров. Также клиенты могут совершать множество покупок и в одной покупки может быть
   множество товаров. Для хранения всех отношений удобнее всего использовать реляционный тип БД.

---

2. Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой
   классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы
   и для каждого пункта надо привести классификацию):
- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
- Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

<h3>Ответ:</h3>

CAP-теорема:
1. Данные записываются на все узлы с задержкой до часа (асинхронная запись). Так как запись асинхронная, о 
   согласованности данных не может идти и речи. Отсюда следует вывод, что по CAP-теореме соответствует AP.
2. При сетевых сбоях, система может разделиться на 2 раздельных кластера. Если система при сетевых сбоях может
   разделиться на 2 раздельных кластера, то это говорит о свойстве "устойчивость к разделению". Данное свойство системы
   реализовано с целью, чтобы системы была доступна в любой момент времени. Отсюда следует вывод, что по CAP-теореме
   система соответствует AP.
3. Система может не прислать корректный ответ или сбросить соединение. Так как система может не прислать корректный
   ответ или сбросить соединение, то доступности не может идти и речи. тсюда следует вывод, что по CAP-теореме система
   соответствует CP.
   
PACELC-теорема:
1. Данные записываются на все узлы с задержкой до часа (асинхронная запись) - PA/EL
2. При сетевых сбоях, система может разделиться на 2 раздельных кластера - PA/EC
3. Система может не прислать корректный ответ или сбросить соединение - PC/EL

---

3. Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

<h3>Ответ:</h3>

Не могут. Причины:

- ACID принцип рассчитан на высоконадежные системы, в то время как BA (базовая доступность) из принципа BASE полностью 
  противоречит D (стойкости) по принципу ACID. То есть получается противопоставление между гарантия применения успешных
  транзакций и транзакций, которые выведут неверные результаты.
- Принципы BASE и ACID несут в себе разные свойства для одной цели. Для сравнения ACID это реляционные БД, а BASE это
  NoSQL. Обе БД имеют одну цель - хранение сущности. Но, если реляционные БД позволяют проектировать высоконадежные
  системы, то NoSQL позволяют проектировать высокопроизводительные системы.
  
---

4. Вам дали задачу написать системное решение, основой которого бы послужили:
- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?

<h3>Ответ:</h3>

Скорее всего речь идет про Redis.

Механизм Pub/Sub позволяет подписаться на канал и получать сообщения из него или же отправлять в этот канал сообщение,
которое будет получено всеми подписчиками. 

Механизм pub/sub не гарантирует доставки сообщений и консистентности. Поэтому, если необходимые задачи системного
решения являются критичиными, то механизм Pub/Sub будет избыточен.