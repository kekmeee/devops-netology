Домашняя работа по занятию "5.2. Системы управления виртуализацией"
==

1. Выберете подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based
  инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного
  механизма создания резервных копий;
2. Требуется наиболее производительное бесплатное opensource решение для виртуализации небольшой (20 серверов)
  инфраструктуры Linux и Windows виртуальных машин;
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры;
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

<h3>Ответ:</h3>

1. Особенности инфраструктуры:
   - количество хостов: 100;
   - ОС хостов: Linux, Windows;
   - задачи и особенности: балансировка, репликация, создание резервных копий.
    
Предлагаемое решение: VMware vSphere.

Пояснение: VMware vSphere не имеет ограничений по выбору ОС. Количество узлов может говорить о том, что инфраструктура
обширная и требует использования платных продуктов, имеющих поддержку и высокий уровень безопасности.
    
2. Особенности инфраструктуры:
   - количество хостов: 20;
   - ОС хостов: Linux, Windows;
   - задачи и особенности: бесплатное opensource решение. 

Предлагаемое решение: KVM.

Пояснение: KVM поддерживает ОС Linux, Windows. Это бесплатное opensource решение.


3. Особенности инфраструктуры:
   - количество хостов: не указано;
   - ОС хостов: Windows;
   - задачи и особенности: бесплатное и совместимое решение. 

Предлагаемое решение: Hyper-V.

Пояснение: Hyper-V это максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
Hyper-V является бесплатным и входит в состав ОС. В данном случае необходимо приобретать лицензии на все ОС (как
хостовую, так и виртуальные).


4. Особенности инфраструктуры:
   - количество хостов: от 2;
   - ОС хостов: Linux;
   - задачи и особенности: тестирования программного продукта. 

Предлагаемое решение: VMware workstation, virtualbox, IaaS, vagrant, docker.

Пояснение: здесь можно разгуляться. Можно использовать как бесплатные, так и платные решения. Можно инфраструктуру
отправить в облако, а можно все разворачивать локально. Здесь важна не сама инфраструктура, ПО, которое нужно
протестировать. А исходя из описания реализации, это системное окружение необходимое для dev'a, но никак не для stage
или, уж тем более, prod'а.

---

2. Опишите сценарий миграции с VMware vSphere на Hyper-V для Linux и Windows виртуальных машин. Детально опишите
   необходимые шаги для использования всех преимуществ Hyper-V для Windows.

<h3>Ответ:</h3>

Все этапы проводятся в отдельных ветках до выхода в продакшн (dev, stage и др.).
Основные этапы миграции:
- подготовка нового сервера с Hyper-V. На сервере выбираем тариф Hyper-V, активируем роли.
- выполняем настройку Hyper-V (сеть, дисковое пространство, репликации и резервные копии)
- конвертирование переносимой ВМ. Можно использовать готовые решения от
  [microsoft](https://docs.microsoft.com/ru-ru/system-center/vmm/vm-convert-vmware?view=sc-vmm-2019) или попробовать
  все сделать [вручную](https://habr.com/ru/company/dataline/blog/479894/).
- установка ВМ на Hyper-V
- проверка работоспособности. Выполняется необходимый набор инструкций для проверки работоспособности ВМ (работа сети,
  доступа файловой системы, работа ПО и др.)


---

3. Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления
   виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был бы
   выбор, то создавали ли вы бы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

<h3>Ответ:</h3>

Возможные проблемы и недостатки гетерогенной среды виртуализации:
- сложность администрирования;
- необходимое наличие высококвалифицированных специалистов;
- повышенный риск отказа и недоступности;
- завышенная стоимость обслуживания;

Действия для минимизации рисков и проблем:
- если гетерогенность не оправдана, то рассмотреть возможность отказа от нее;
- если она оправдана, то часть инфраструктуры можно перенести на IaaS (AWS), а саму инфраструктуру вывести в IaC
  (Terraform);
- максимальное автоматизировать развертывание и тестирование инфраструктуры, чтобы она была единая.

Создание гетерогенной среды зависит от разрабатываемой инфраструктуры. Необходимо понимать для чего разрабатывается
инфраструктура. Если для тестирования ПО, то это может быть одна инфраструктура, локальная с использованием virtualbox
(но опять же зависит от типа тестирования).